webpackJsonp([1],{ABXM:function(e,t){},GdJn:function(e,t){},NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("7+uW"),n={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"anchor",staticClass:"anchor"},[i("div",{ref:"list",staticClass:"list"},[i("div",{ref:"one",staticClass:"list-item"},[e._v("商品图片")]),e._v(" "),i("div",{ref:"two",staticClass:"list-item"},[e._v("基本信息")]),e._v(" "),i("div",{ref:"three",staticClass:"list-item"},[e._v("自定义属性")]),e._v(" "),i("div",{ref:"four",staticClass:"list-item"},[e._v("商品库存")])]),e._v(" "),i("div",{staticClass:"nav-wrap"},[i("div",{class:{"nav-item":!0,active:"one"===e.activeName},on:{click:function(t){return e.changeNav("one")}}},[e._v("商品图片")]),e._v(" "),i("div",{class:{"nav-item":!0,active:"two"===e.activeName},on:{click:function(t){return e.changeNav("two")}}},[e._v("基本信息")]),e._v(" "),i("div",{class:{"nav-item":!0,active:"three"===e.activeName},on:{click:function(t){return e.changeNav("three")}}},[e._v("自定义属性")]),e._v(" "),i("div",{class:{"nav-item":!0,active:"four"===e.activeName},on:{click:function(t){return e.changeNav("four")}}},[e._v("商品库存")])])])},staticRenderFns:[]};i("VU/8")({name:"Anchor",data:function(){return{activeName:"one"}},created:function(){},mounted:function(){this.$refs.anchor.addEventListener("scroll",this.handleScroll)},methods:{changeNav:function(e){var t=this,i=this.$refs[e].offsetTop;this.activeName=e,this.$nextTick(function(){t.$refs.anchor.scrollTo({top:i,behavior:"smooth"})})},handleScroll:function(e){var t=e.target.scrollTop;t<this.$refs.two.offsetTop?this.activeName="one":t>=this.$refs.two.offsetTop&&t<this.$refs.three.offsetTop?this.activeName="two":t>=this.$refs.three.offsetTop&&t<this.$refs.four.offsetTop?this.activeName="three":this.activeName="four"}}},n,!1,function(e){i("GdJn")},"data-v-2e074ea0",null).exports;var s={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"btn",on:{click:e.addItem}},[e._v("新增自定义")]),e._v(" "),e.list.length>0?i("div",{staticClass:"list"},e._l(e.list,function(t,a){return i("div",{key:t.name,staticClass:"item"},[i("span",{staticClass:"name"},[e._v(e._s(t.name))]),e._v(" "),i("div",[i("span",{staticClass:"operate-btn",on:{click:function(t){return e.editItem(a)}}},[e._v("编辑")]),e._v(" "),i("span",{staticClass:"operate-btn",on:{click:function(t){return e.deleteItem(a)}}},[e._v("删除")])])])}),0):e._e(),e._v(" "),i("el-dialog",{attrs:{title:"新增自定义",visible:e.isShowAddModal,width:"30%"},on:{"update:visible":function(t){e.isShowAddModal=t}}},[i("el-form",{ref:"form",attrs:{inline:!0,model:e.form}},[i("el-form-item",{attrs:{label:"名称",prop:"name","label-width":"60px",rules:{required:!0,message:"请输入名称",trigger:"blur"}}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.cancel}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.confirmAdd("form")}}},[e._v("确 定")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"编辑",visible:e.isShowEditModal,width:"30%"},on:{"update:visible":function(t){e.isShowEditModal=t}}},[i("el-form",{ref:"form",attrs:{inline:!0,model:e.form}},[i("el-form-item",{attrs:{label:"名称",prop:"name","label-width":"60px",rules:{required:!0,message:"请输入名称",trigger:"blur"}}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.cancelEdit}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.confirmEdit("form")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};i("VU/8")({data:function(){return{list:[],form:{name:""},currIndex:0,isShowAddModal:!1,isShowEditModal:!1}},methods:{addItem:function(){this.isShowAddModal=!0},hideAddModal:function(){this.isShowAddModal=!1},showAddModal:function(){this.isShowAddModal=!0},cancel:function(){this.hideAddModal(),this.form.name=""},confirmAdd:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.form.name&&(t.list.push({name:t.form.name}),t.hideAddModal(),t.form.name="",t.showSuccessTip("添加成功！"))})},hideEditModal:function(){this.isShowEditModal=!1},showEditModal:function(){this.isShowEditModal=!0},cancelEdit:function(){this.hideEditModal(),this.form.name=""},editItem:function(e){this.showEditModal(),this.form.name=this.list[e].name,this.currIndex=e},deleteItem:function(e){this.list.splice(e,1),this.showSuccessTip("删除成功！")},confirmEdit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.form.name&&(t.list.splice(t.currIndex,1,{name:t.form.name}),t.hideEditModal(),t.form.name="",t.showSuccessTip("编辑成功！"))})},showSuccessTip:function(e){this.$message({message:e,type:"success"})}}},s,!1,function(e){i("q2JO")},null,null).exports;var c=i("Gu7T"),l=i.n(c),o=i("bOdI"),d=i.n(o),r={props:{skuList:Array,isCanAddImg:Boolean,checkedSkuNames:Array},data:function(){return{isShowSelectBox:!1,isShowSelectValueModal:!1,isShowAddModal:!1,currAddedSpecificationValue:[],checkAll:!1,currSelectItem:{name:"",values:[],checkedValues:[]},specificationValue:"",tempSpecificationValues:[],isShowValuesBox:!1,tempCheckedValues:[],form:{specificationName:""},isAddImg:!1,isFocus:!1,currValue:""}},created:function(){},computed:{isShowAddSpecificationValueBtn:function(){return!!this.currSelectItem.name&&!this.isShowSelectBox&&!this.isShowSelectValueModal&&this.currSelectItem.checkedValues.length<18}},methods:{focus:function(){this.isFocus=!0},blur:function(){this.isFocus=!1},setCurrItem:function(e){this.currValue=e.text},handleUploadSuccess:function(e,t){var i=this,a=URL.createObjectURL(t.raw);this.currSelectItem.checkedValues.forEach(function(e,t){e.text===i.currValue&&(i.currSelectItem.checkedValues[t].imageUrl=a)}),this.handleChange()},clickSelectBox:function(){this.isShowSelectBox=!this.isShowSelectBox},showAddModal:function(){this.isShowAddModal=!0},hideAddModal:function(){this.isShowAddModal=!1},cancel:function(){this.form.specificationName="",this.hideAddModal()},confirmAdd:function(e){var t=this,i=this.skuList.map(function(e){return e.name});this.$refs[e].validate(function(e){if(!e)return!1;-1===i.indexOf(t.form.specificationName)?(t.$emit("add-sku-name",t.form.specificationName),t.hideAddModal()):t.$message({message:"已有该规格名，请重新编辑！",type:"warning"})})},selectSpecificationName:function(e){this.checkedSkuNames.indexOf(e.name)>-1?this.$message({message:"不能选择重复规格名！",type:"warning"}):(this.currSelectItem=e,this.isShowSelectBox=!1,this.checkAll=!1,this.currSelectItem.checkedValues=[],this.currAddedSpecificationValue=[],this.tempCheckedValues=[],this.$emit("change-sku-name",e))},clickAddSpecificatioValueBtn:function(){this.isShowSelectValueModal=!0,this.tempCheckedValues=[].concat(l()(this.currSelectItem.checkedValues)),this.checkAll=this.currSelectItem.values.length===this.tempCheckedValues.length},cancelSelectSpecificatioValue:function(){this.isShowSelectValueModal=!1,this.specificationValue=""},addSpecificatioValue:function(){var e=this.currSelectItem.values.length;this.specificationValue&&!this.isShowValuesBox&&this.tempSpecificationValues.push(this.specificationValue);var t=[].concat(l()(this.currSelectItem.values)),i=this.currSelectItem.values.map(function(e){return e.text});this.tempSpecificationValues.forEach(function(e){t.length<18&&-1===i.indexOf(e)&&t.push({text:e,imageUrl:""})}),this.$emit("add-sku-value",{name:this.currSelectItem.name,values:t}),this.specificationValue="",this.tempSpecificationValues=[],this.currSelectItem.values.length>e&&(this.checkAll=!1)},handleCheckAllChange:function(e){this.tempCheckedValues=e?this.currSelectItem.values.slice():[]},handleCheckedValuesChange:function(e){var t=e.length;this.checkAll=t===this.currSelectItem.values.length},keyEnter:function(){-1===this.currSelectItem.values.map(function(e){return e.text}).indexOf(this.specificationValue)&&-1===this.tempSpecificationValues.indexOf(this.specificationValue)&&this.specificationValue&&(this.tempSpecificationValues.push(this.specificationValue),this.specificationValue="")},clickValuesBox:function(){},delTag:function(e){e>=0?this.tempSpecificationValues.splice(e,1):""===this.specificationValue&&this.tempSpecificationValues.pop()},delValue:function(e){this.currSelectItem.checkedValues.splice(e,1),this.handleChange()},confirmSelect:function(){this.currSelectItem.checkedValues=this.tempCheckedValues,this.isShowSelectBox=!1,this.isShowSelectValueModal=!1,this.handleChange()},handleChange:function(){this.$emit("change",this.currSelectItem)}}},u={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"sku"},[i("div",{staticClass:"select-container"},[i("div",{staticStyle:{display:"flex","align-items":"center"}},[i("div",{class:{"select-box":!0,active:e.isShowSelectBox,selected:!!e.currSelectItem.name},on:{click:e.clickSelectBox}},[e._v(e._s(e.currSelectItem.name||"选择/新增规格名"))]),e._v(" "),e.isCanAddImg&&e.currSelectItem.checkedValues.length>0?i("el-checkbox",{staticStyle:{"margin-left":"20px"},model:{value:e.isAddImg,callback:function(t){e.isAddImg=t},expression:"isAddImg"}},[e._v("添加规格图片")]):e._e(),e._v(" "),e.currSelectItem.checkedValues.length>0&&e.isAddImg?i("span",{staticStyle:{"font-size":"12px",color:"#909399","font-weight":"bold"}},[e._v("不同规格产品会展示不同的图片，建议尺寸：640 * 640 像素")]):e._e()],1),e._v(" "),e.isShowSelectBox?i("div",{staticClass:"specification-list"},[0===e.skuList.length?i("div",{staticClass:"specification-item empty"},[e._v("暂无规格")]):e._e(),e._v(" "),e._l(e.skuList,function(t){return i("div",{key:t.name,staticClass:"specification-item",on:{click:function(i){return e.selectSpecificationName(t)}}},[e._v(e._s(t.name))])}),e._v(" "),i("div",{staticClass:"specification-item border-top",on:{click:e.showAddModal}},[e._v("+ 新增规格名")])],2):e._e(),e._v(" "),e.isShowSelectValueModal&&!e.isShowSelectBox?i("div",{staticClass:"value-select"},[i("div",{staticClass:"select-area"},[i("div",{staticClass:"title"},[e._v("选择"+e._s(e.currSelectItem.name||"规格值"))]),e._v(" "),0===e.currSelectItem.values.length?i("div",{staticClass:"empty-tip"},[e._v("暂无规格值！请输入...")]):e._e(),e._v(" "),e.currSelectItem.values.length>0?i("div",{staticClass:"checkbox-container"},[i("el-checkbox",{staticClass:"checkall",on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),e._v(" "),i("el-checkbox-group",{on:{change:e.handleCheckedValuesChange},model:{value:e.tempCheckedValues,callback:function(t){e.tempCheckedValues=t},expression:"tempCheckedValues"}},e._l(e.currSelectItem.values,function(t){return i("el-checkbox",{key:t.text,staticClass:"checkbox",attrs:{label:t}},[e._v(e._s(t.text))])}),1)],1):e._e(),e._v(" "),i("div",{staticStyle:{display:"flex"}},[i("div",{class:[{"HL-border":e.isFocus},"tags-wrap"]},[e._l(e.tempSpecificationValues,function(t,a){return i("div",{key:t,staticClass:"tags-item"},[e._v(e._s(t)+" "),i("div",{staticClass:"delete-btn",on:{click:function(t){return e.delTag(a)}}},[e._v("+")])])}),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.specificationValue,expression:"specificationValue",modifiers:{trim:!0}}],class:{"value-input":!0,"smaller-width":e.tempSpecificationValues.length>0},attrs:{placeholder:0===e.tempSpecificationValues.length?"输入规格值，输入多个就用回车键隔开":""},domProps:{value:e.specificationValue},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.keyEnter(t)},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"])?null:e.delTag(t)},focus:e.focus,blur:[e.blur,function(t){return e.$forceUpdate()}],input:function(t){t.target.composing||(e.specificationValue=t.target.value.trim())}}})],2),e._v(" "),i("el-button",{staticStyle:{height:"40px"},attrs:{type:"primary",disabled:0===e.tempSpecificationValues.length&&!e.specificationValue},on:{click:e.addSpecificatioValue}},[e._v("增加规格值")])],1)]),e._v(" "),i("div",{staticClass:"btn-row"},[i("el-button",{on:{click:e.cancelSelectSpecificatioValue}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary",disabled:0===e.tempCheckedValues.length},on:{click:e.confirmSelect}},[e._v("选好了")])],1)]):e._e()]),e._v(" "),i("div",{staticClass:"tags-wrap no-border"},[e._l(e.currSelectItem.checkedValues,function(t,a){return i("div",{key:t.text,staticStyle:{"margin-right":"12px"}},[i("div",{staticClass:"tags-item"},[e._v(e._s(t.text)+" "),i("div",{staticClass:"delete-btn",on:{click:function(t){return e.delValue(a)}}},[e._v("+")])]),e._v(" "),e.isAddImg?i("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","show-file-list":!1,"on-success":e.handleUploadSuccess}},[t.imageUrl?i("img",{staticClass:"avatar",attrs:{src:t.imageUrl},on:{click:function(i){return e.setCurrItem(t)}}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon",on:{click:function(i){return e.setCurrItem(t)}}})]):e._e()],1)}),e._v(" "),e.isShowAddSpecificationValueBtn?i("div",{staticClass:"add-value",on:{click:e.clickAddSpecificatioValueBtn}},[e._v("+增加规格值")]):e._e()],2),e._v(" "),i("el-dialog",{attrs:{title:"新增规格名",visible:e.isShowAddModal,width:"30%"},on:{"update:visible":function(t){e.isShowAddModal=t}}},[i("el-form",{ref:"form",attrs:{inline:!0,model:e.form}},[i("el-form-item",{attrs:{label:"规格名",prop:e.form.specificationName,"label-width":"100px",rules:{required:!0,message:"请输入规格名",trigger:"blur"}}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.specificationName,callback:function(t){e.$set(e.form,"specificationName",t)},expression:"form.specificationName"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.cancel}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.confirmAdd("form")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var h={components:{SkuItem:i("VU/8")(r,u,!1,function(e){i("sY9b")},"data-v-dd8861ea",null).exports},props:{skuList:Array},data:function(){return{checkedSkuNames:[],value:[],arr1:[],arr2:[],name1:"",name2:""}},methods:{addSpecificationName:function(e){console.log(e),this.$emit("add-sku-name",e)},addSpecificationValue:function(e){console.log(e),this.$emit("add-sku-value",e)},change1:function(e){var t=this;console.log(e),this.arr1=[],this.value=[],e.checkedValues.forEach(function(i){var a;t.arr1.push((a={},d()(a,e.name,i.text),d()(a,"imageUrl",i.imageUrl),a))}),0===this.arr2.length?this.value=[].concat(l()(this.arr1)):this.arr1.forEach(function(e){t.arr2.forEach(function(i){var a;t.value.push((a={},d()(a,t.name1,e[t.name1]),d()(a,t.name2,i[t.name2]),d()(a,"imageUrl",e.imageUrl),a))})}),this.$emit("change",this.value)},change2:function(e){var t=this;this.arr2=[],this.value=[],e.checkedValues.forEach(function(i){t.arr2.push(d()({},e.name,i.text))}),0===this.arr1.length?this.value=[].concat(l()(this.arr2)):this.arr1.forEach(function(e){t.arr2.forEach(function(i){var a;t.value.push((a={},d()(a,t.name1,e[t.name1]),d()(a,t.name2,i[t.name2]),d()(a,"imageUrl",e.imageUrl),a))})}),this.$emit("change",this.value)},changeSkuName1:function(e){console.log(e),this.name1=e.name,this.checkedSkuNames=[this.name1,this.name2],console.log(this.checkedSkuNames)},changeSkuName2:function(e){this.name2=e.name,this.checkedSkuNames=[this.name1,this.name2],console.log(this.checkedSkuNames)}}},m={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"Sku"}},[i("SkuItem",{attrs:{skuList:e.skuList,isCanAddImg:!0,checkedSkuNames:e.checkedSkuNames},on:{"change-sku-name":e.changeSkuName1,"add-sku-name":e.addSpecificationName,"add-sku-value":e.addSpecificationValue,change:e.change1}}),e._v(" "),i("SkuItem",{staticStyle:{"margin-top":"30px"},attrs:{skuList:e.skuList,isCanAddImg:!1,checkedSkuNames:e.checkedSkuNames},on:{"change-sku-name":e.changeSkuName2,"add-sku-name":e.addSpecificationName,"add-sku-value":e.addSpecificationValue,change:e.change2}})],1)},staticRenderFns:[]};i("VU/8")(h,m,!1,function(e){i("PuE4")},null,null).exports;var f={name:"tree-item",props:{data:{type:Object,required:!0},addChildBtnText:{type:String,default:"新增子分类"},label:{type:String,default:"分类名称"},isAllExpand:Boolean,deep:Number,parentIndex:Number},data:function(){return{isExpand:this.isAllExpand,isShowAddModal:!1,form:{name:name}}},created:function(){},computed:{},methods:{hasChildren:function(e){return e.children&&e.children.length},addChild:function(e){this.$emit("add-child",e)},del:function(e){this.$emit("del",e)},edit:function(e){this.$emit("edit",e)},toggleExpandStatus:function(){this.isExpand=!this.isExpand},showAddModal:function(){console.log(this.data),this.isShowAddModal=!0},hideAddModal:function(){this.isShowAddModal=!1},showEditModal:function(){this.form.name=this.data.name,this.showAddModal()},showConfirmDelModal:function(){var e=this;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){e.$emit("del",{id:e.data.id,parentIndex:e.parentIndex})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},cancel:function(e){this.$refs[e].resetFields(),this.clearInputAndCloseModal()},confirm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.checkNameIsRepeat()?t.showRepeatAddTip():(t.$emit("add-child",{id:t.data.id,parentIndex:t.parentIndex,name:t.form.name}),t.clearInputAndCloseModal())})},checkNameIsRepeat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.form.name;return(this.data.children&&this.data.children.map(function(e){return e.name})||[]).includes(e)},showRepeatAddTip:function(){this.$message({message:"不能重复添加！",type:"warning"})},clearInputAndCloseModal:function(){this.form.name="",this.hideAddModal()}}},p={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"tree-item"}},[i("div",{staticClass:"tree-item",style:{width:860-30*e.deep+"px"}},[i("div",{staticClass:"wrap"},[e.hasChildren(e.data)?i("div",{class:["icon",{close:!e.isExpand}],on:{click:e.toggleExpandStatus}}):e._e(),e._v(" "),i("span",{style:{"margin-left":e.hasChildren(e.data)?"12px":"0"}},[e._v(e._s(e.data.name))]),e._v(" "),i("div",{staticClass:"btn-container"},[i("el-button",{attrs:{type:"text"},on:{click:e.showAddModal}},[e._v(e._s(e.addChildBtnText))]),e._v(" "),i("el-button",{attrs:{type:"text"},on:{click:e.showEditModal}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{type:"text"},on:{click:e.showConfirmDelModal}},[e._v("删除")])],1)]),e._v(" "),e.hasChildren(e.data)?i("div",{directives:[{name:"show",rawName:"v-show",value:e.isExpand,expression:"isExpand"}],staticClass:"children"},e._l(e.data.children,function(t,a){return i("tree-item",{key:a,attrs:{data:t,isAllExpand:e.isAllExpand,deep:e.deep+1,parentIndex:e.parentIndex},on:{"add-child":e.addChild,del:e.del,edit:e.edit}})}),1):e._e()]),e._v(" "),i("el-dialog",{attrs:{title:e.addChildBtnText,visible:e.isShowAddModal,width:"40%"},on:{"update:visible":function(t){e.isShowAddModal=t}}},[i("el-form",{ref:"form",attrs:{model:e.form}},[i("el-form-item",{attrs:{label:e.label,prop:"name","label-width":"100px",rules:{required:!0,message:"请输入"+e.label,trigger:"blur"}}},[i("el-input",{attrs:{autocomplete:"off",autofocus:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name","string"==typeof t?t.trim():t)},expression:"form.name"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){return e.cancel("form")}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.confirm("form")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var v={components:{TreeItem:i("VU/8")(f,p,!1,function(e){i("Tp9I")},"data-v-5cf82ee9",null).exports},props:{data:{type:Array,required:!0},tip:String,addBtnText:{type:String,default:"新增分类"},addChildBtnText:{type:String,default:"新增子分类"},label:{type:String,default:"分类名称"}},data:function(){return{isShowAddModal:!1,form:{name:name},isAllExpand:!1,update:!0}},created:function(){},methods:{showAddModal:function(){this.isShowAddModal=!0},hideAddModal:function(){this.isShowAddModal=!1},cancel:function(e){this.$refs[e].resetFields(),this.clearInputAndCloseModal()},confirm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.checkNameIsRepeat()?t.showRepeatAddTip():(t.$emit("add",t.form.name),t.clearInputAndCloseModal())})},checkNameIsRepeat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.form.name;return this.data.map(function(e){return e.name}).includes(e)},showRepeatAddTip:function(){this.$message({message:"不能重复添加！",type:"warning"})},clearInputAndCloseModal:function(){this.form.name="",this.hideAddModal()},toggleAllExpand:function(){var e=this;this.isAllExpand=!this.isAllExpand,this.update=!1,this.$nextTick(function(){e.update=!0})},edit:function(e){this.$emit("add-child",e)},addChild:function(e){this.$emit("add-child",e)},del:function(e){this.$emit("del",e)}}},g={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"tree"}},[i("div",{staticClass:"header"},[i("el-button",{attrs:{type:"primary"},on:{click:e.showAddModal}},[e._v(e._s(e.addBtnText))]),e._v(" "),e.data.length?i("el-button",{on:{click:e.toggleAllExpand}},[e._v("展开/收起")]):e._e(),e._v(" "),i("span",{staticClass:"tip"},[e._v(e._s(e.tip))])],1),e._v(" "),e.update?e._l(e.data,function(t,a){return i("tree-item",{key:t.name,attrs:{data:t,addChildBtnText:e.addChildBtnText,isAllExpand:e.isAllExpand,label:e.label,deep:0,parentIndex:a},on:{edit:e.edit,"add-child":e.addChild,del:e.del}})}):e._e(),e._v(" "),i("el-dialog",{attrs:{title:e.addBtnText,visible:e.isShowAddModal,width:"40%"},on:{"update:visible":function(t){e.isShowAddModal=t}}},[i("el-form",{ref:"form",attrs:{model:e.form}},[i("el-form-item",{attrs:{label:e.label,prop:"name","label-width":"100px",rules:{required:!0,message:"请输入"+e.label,trigger:"blur"}}},[i("el-input",{attrs:{autocomplete:"off",autofocus:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name","string"==typeof t?t.trim():t)},expression:"form.name"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){return e.cancel("form")}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.confirm("form")}}},[e._v("确 定")])],1)],1)],2)},staticRenderFns:[]};var k=i("VU/8")(v,g,!1,function(e){i("zY/I")},"data-v-9ceea17a",null).exports,S={props:{visible:{type:Boolean,required:!0},title:{type:String,required:!0}},data:function(){return{}},methods:{close:function(){this.$emit("update:visible",!1)},save:function(){this.$emit("save")}}},_={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"mask"},[i("div",{staticClass:"pop"},[i("header",{staticClass:"header"},[i("div",{staticClass:"icon-close",on:{click:e.close}}),e._v(" "),i("div",[e._v(e._s(e.title))]),e._v(" "),i("el-button",{staticClass:"save-btn",attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1),e._v(" "),e._t("default")],2)])])},staticRenderFns:[]};var x={name:"App",components:{Tree:k,Pop:i("VU/8")(S,_,!1,function(e){i("ABXM")},"data-v-34e6b65f",null).exports},data:function(){return{isShow:!1,update:!0,data:[{id:1,name:"热门推荐",children:[{id:2,name:"桃花醉",children:[{id:3,name:"桃花醉53度"},{id:4,name:"白酒"}]}]},{id:5,name:"sdfs",children:[{id:6,name:"桃花醉",children:[{id:7,name:"桃花醉53度"},{id:8,name:"白酒"}]}]}],skuList:[{name:"尺寸",values:[{text:"21寸",imageUrl:""},{text:"22寸",imageUrl:""}],checkedValues:[]},{name:"颜色",values:[{text:"蓝色",imageUrl:""},{text:"红色",imageUrl:""}],checkedValues:[]}],isCanAddImg:!0}},methods:{open:function(){this.isShow=!0},save:function(){this.isShow=!1},createId:function(){return Math.floor(1e10*Math.random())},add:function(e){console.log(e),this.data.push({id:this.createId(),name:e})},addChild:function(e){this.addFunc(this.data[e.parentIndex],e)},addFunc:function(e,t){var i=this;if(e.id===t.id)return e.children||(e.children=[]),void e.children.push({id:this.createId(),name:t.name});e.children&&e.children.length&&e.children.forEach(function(e){i.addFunc(e,t)})},edit:function(){},del:function(e){this.delFunc(this.data,this.data[e.parentIndex],e.parentIndex,e),console.log("data",this.data)},delFunc:function(e,t,i,a){var n=this;if(console.log(t.id,a.id),t.id===a.id)return e.splice(i,1),void this.$message({type:"success",message:"删除成功!"});t.children&&t.children.length&&(console.log(1),t.children.forEach(function(e,i){n.delFunc(t.children,e,i,a)}))},addSpecificationName:function(e){console.log(e),this.skuList.push({name:e,values:[],checkedValues:[]})},addSpecificationValue:function(e){console.log(e),this.skuList.forEach(function(t){t.name===e.name&&(t.values=e.values)})},change:function(e){console.log("item",e)}}},w={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("el-button",{on:{click:e.open}},[e._v("打开")]),e._v(" "),i("Pop",{attrs:{visible:e.isShow,title:"新建拜访"},on:{"update:visible":function(t){e.isShow=t},save:e.save}},[i("el-form",{staticStyle:{padding:"30px"}},[i("el-input",{attrs:{placeholder:"输入"}}),e._v(" "),i("el-button",{staticStyle:{"margin-top":"20px"}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]};var C=i("VU/8")(x,w,!1,function(e){i("uZst")},null,null).exports,b=i("zL8q"),A=i.n(b);i("tvR6");a.default.use(A.a),a.default.config.productionTip=!1,new a.default({el:"#app",components:{App:C},template:"<App/>"})},PuE4:function(e,t){},Tp9I:function(e,t){},q2JO:function(e,t){},sY9b:function(e,t){},tvR6:function(e,t){},uZst:function(e,t){},"zY/I":function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.2cbc5ebeabb34a636823.js.map